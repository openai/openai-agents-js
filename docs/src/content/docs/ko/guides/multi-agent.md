---
title: 멀티 에이전트 오케스트레이션
description: Coordinate the flow between several agents
---

오케스트레이션은 앱에서 에이전트가 흐르는 방식입니다. 어떤 에이전트가 어떤 순서로 실행되며, 다음에 무엇을 할지 어떻게 결정하는가를 의미합니다. 에이전트를 오케스트레이션하는 방법은 두 가지가 있습니다:

1. LLM이 의사결정을 하도록 허용: LLM의 지능을 활용해 계획하고 추론하여 다음에 취할 단계를 결정
2. 코드로 오케스트레이션: 코드로 에이전트의 흐름을 결정

이 패턴들은 혼합하여 사용할 수 있습니다. 각각의 트레이드오프는 아래에 설명합니다.

## LLM 기반 오케스트레이션

에이전트는 instructions, tools 및 핸드오프로 장비된 LLM입니다. 이는 개방형 과제가 주어졌을 때, LLM이 도구를 사용해 행동하고 데이터를 획득하며, 핸드오프를 통해 하위 에이전트에 작업을 위임하는 방식으로 과제를 처리할 계획을 자율적으로 수립할 수 있음을 의미합니다. 예를 들어, 리서치 에이전트는 다음과 같은 도구를 갖출 수 있습니다:

- 웹 검색을 통한 온라인 정보 탐색
- 파일 검색 및 검색 기능을 통한 사내 데이터와 연결 검색
- 컴퓨터 사용을 통한 컴퓨터 상의 작업 수행
- 코드 실행을 통한 데이터 분석
- 계획 수립, 보고서 작성 등에 특화된 에이전트로의 핸드오프

이 패턴은 과제가 개방형이고 LLM의 지능에 의존하고자 할 때 유용합니다. 여기서 중요한 전술은 다음과 같습니다:

1. 좋은 프롬프트에 투자하세요. 사용 가능한 도구, 사용 방법, 그리고 준수해야 할 매개변수를 명확히 하세요.
2. 앱을 모니터링하고 반복 개선하세요. 어디서 문제가 발생하는지 확인하고 프롬프트를 개선하세요.
3. 에이전트가 자기 성찰하고 개선할 수 있게 하세요. 예를 들어 루프로 실행하여 스스로를 비평하게 하거나, 오류 메시지를 제공해 개선하게 하세요.
4. 모든 일을 잘하는 범용 에이전트 대신 하나의 작업에 특화된 에이전트를 두세요.
5. [evals](https://platform.openai.com/docs/guides/evals)에 투자하세요. 이를 통해 에이전트를 학습시키고 과제 수행 능력을 향상할 수 있습니다.

## 코드 기반 오케스트레이션

LLM 기반 오케스트레이션이 강력하지만, 코드 기반 오케스트레이션은 속도, 비용, 성능 측면에서 작업을 더 결정론적이고 예측 가능하게 만듭니다. 일반적인 패턴은 다음과 같습니다:

- [structured outputs](https://platform.openai.com/docs/guides/structured-outputs)를 사용해 코드로 검사할 수 있는 적절한 형식의 데이터를 생성. 예를 들어, 에이전트에게 작업을 몇 가지 카테고리로 분류하도록 요청한 다음, 카테고리에 따라 다음 에이전트를 선택할 수 있음
- 한 에이전트의 출력을 다음 에이전트의 입력으로 변환해 여러 에이전트를 체이닝. 블로그 글쓰기를 리서치, 개요 작성, 본문 작성, 비평, 개선의 일련의 단계로 분해할 수 있음
- 작업을 수행하는 에이전트를 `while` 루프로 실행하고, 평가 및 피드백을 제공하는 에이전트와 함께 evaluator가 출력이 특정 기준을 통과했다고 말할 때까지 반복
- `Promise.all` 같은 JavaScript 기본 컴포넌트를 통해 여러 에이전트를 병렬로 실행. 서로 의존하지 않는 여러 작업이 있을 때 속도 면에서 유용

[`examples/agent-patterns`](https://github.com/openai/openai-agents-js/tree/main/examples/agent-patterns)에 다양한 code examples가 있습니다.
