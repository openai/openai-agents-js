---
title: 멀티 에이전트 오케스트레이션
description: Coordinate the flow between several agents
---

오케스트레이션(Orchestration)은 애플리케이션 내에서 에이전트의 동작 흐름을 의미합니다. 어떤 에이전트를 실행할지, 어떤 순서로 실행할지, 그리고 이후 동작을 어떻게 결정할지를 정의합니다. 에이전트를 오케스트레이션하는 방식은 크게 두 가지로 나눌 수 있습니다:

1. LLM에 의사결정을 맡기기: LLM의 지능을 활용해 계획하고 추론하여 다음에 취할 단계를 스스로 결정하도록 합니다
2. 코드로 오케스트레이션하기: 코드로 에이전트의 흐름을 결정합니다

이 패턴들은 섞어서 사용할 수 있습니다. 각각의 장단점은 아래와 같습니다.

## LLM 기반 오케스트레이션

에이전트는 instructions, tools, 핸드오프로 장착된 LLM입니다. 이는 열린 형태의 작업이 주어졌을 때 LLM이 도구를 사용해 행동하고 데이터를 획득하며, 핸드오프를 통해 하위 에이전트에 작업을 위임하는 방식으로 과제를 스스로 계획하고 수행할 수 있음을 의미합니다. 예를 들어, 리서치 에이전트는 다음과 같은 도구를 갖출 수 있습니다:

- 온라인에서 정보를 찾기 위한 웹 검색
- 사유 데이터와 연결을 검색하기 위한 파일 검색 및 검색 결과 가져오기
- 컴퓨터에서 동작을 수행하기 위한 컴퓨터 사용
- 데이터 분석을 위한 코드 실행
- 기획, 보고서 작성 등 특정 작업에 뛰어난 특화 에이전트로의 핸드오프

이 패턴은 작업이 개방형이고 LLM의 지능에 의존하고 싶을 때 적합합니다. 여기서 가장 중요한 전략은 다음과 같습니다:

1. 좋은 프롬프트에 투자하세요. 어떤 도구가 있는지, 어떻게 사용하는지, 어떤 매개변수 범위 내에서 동작해야 하는지 명확히 하세요
2. 앱을 모니터링하고 반복 개선하세요. 어디서 문제가 발생하는지 확인하고 프롬프트를 개선하세요
3. 에이전트가 자기 성찰과 개선을 하도록 허용하세요. 예를 들어 루프에서 실행해 스스로 비판하게 하거나, 오류 메시지를 제공해 개선하도록 하세요
4. 무엇이든 잘하는 범용 에이전트 하나보다 한 가지 작업에 특화된 에이전트를 두세요
5. [평가(evals)](https://platform.openai.com/docs/guides/evals)에 투자하세요. 이를 통해 에이전트를 훈련해 더 잘하도록 만들 수 있습니다

## 코드 기반 오케스트레이션

LLM 기반 오케스트레이션이 강력하긴 하지만, 코드 기반 오케스트레이션은 속도, 비용, 성능 측면에서 더 결정적이고 예측 가능합니다. 일반적인 패턴은 다음과 같습니다:

- [structured outputs](https://platform.openai.com/docs/guides/structured-outputs)를 사용해 코드로 점검할 수 있는 적절한 형식의 데이터를 생성하기. 예를 들어, 작업을 몇 가지 카테고리로 분류하도록 에이전트에 요청하고, 카테고리에 따라 다음 에이전트를 선택할 수 있습니다
- 한 에이전트의 출력을 다음 에이전트의 입력으로 변환해 여러 에이전트를 체이닝하기. 블로그 글 작성 같은 작업을 일련의 단계로 분해할 수 있습니다 — 리서치, 개요 작성, 본문 작성, 비판, 개선
- 평가 및 피드백을 제공하는 에이전트와 함께 작업을 수행하는 에이전트를 `while` 루프에서 실행하고, 평가자가 출력이 특정 기준을 통과했다고 말할 때까지 반복하기
- 여러 에이전트를 병렬로 실행하기. 예: `Promise.all` 같은 JavaScript 기본 구성 요소를 활용. 상호 의존하지 않는 여러 작업이 있을 때 속도를 높이는 데 유용합니다

[`examples/agent-patterns`](https://github.com/openai/openai-agents-js/tree/main/examples/agent-patterns)에 여러 code examples가 있습니다.
