---
title: Cloudflare Workers 用トランスポート
description: Connect your Agents SDK agents from Cloudflare Workers/workerd using a dedicated transport.
---

import { Aside, Steps, Code } from '@astrojs/starlight/components';
import cloudflareBasicExample from '../../../../../../examples/docs/extensions/cloudflare-basic.ts?raw';

Cloudflare Workers とその他の workerd ランタイムでは、グローバルな `WebSocket` コンストラクタを使用して外向きの WebSockets を開くことはできません。これらの環境から リアルタイムエージェント に簡単に接続できるようにするため、extensions パッケージは `fetch()` ベースのアップグレードを内部で実行する専用のトランスポートを提供します。

<Aside type="caution">
  このアダプターはまだ beta
  版です。レアケースの問題やバグに遭遇する可能性があります。 問題は [GitHub
  issues](https://github.com/openai/openai-agents-js/issues)
  からご報告ください。迅速に修正します。Workers で Node.js 風の API
  を利用する場合は、`nodejs_compat` の有効化も検討してください。
</Aside>

## セットアップ

<Steps>

1. **extensions パッケージをインストールします。**

   ```bash
   npm install @openai/agents-extensions
   ```

2. **トランスポートを作成し、セッションに紐付けます。**

   <Code lang="typescript" code={cloudflareBasicExample} />

3. **`RealtimeSession` に接続します。**

   ```typescript
   await session.connect({ apiKey: 'your-openai-ephemeral-or-server-key' });
   ```

</Steps>

## 注意事項

- Cloudflare トランスポートは内部的に `Upgrade: websocket` を伴う `fetch()` を使用し、ソケットの `open` イベントを待機しません。workerd の API に合わせた挙動です
- このトランスポートを使用しても、`RealtimeSession` のすべての機能（ツール、ガードレール など）は通常どおり動作します
- 開発中の詳細なログ検査には `DEBUG=openai-agents*` を使用します
