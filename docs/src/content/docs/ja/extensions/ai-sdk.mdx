---
title: AI SDK で任意モデルを指定
description: Connect your Agents SDK agents to any model through the Vercel's AI SDK
---

import { Aside, Steps, Code } from '@astrojs/starlight/components';
import aiSdkSetupExample from '../../../../../../examples/docs/extensions/ai-sdk-setup.ts?raw';

<Aside type="caution">
  このアダプターはまだ beta
  です。いくつかのモデルプロバイダー、特に小規模なものでは問題が発生する可能性があります。問題があれば
  [GitHub issues](https://github.com/openai/openai-agents-js/issues)
  から報告してください。迅速に修正します。
</Aside>

標準で Agents SDKは Responses API または Chat Completions API を通じて OpenAIモデルと連携します。ただし、別のモデルを使いたい場合は、 Vercel の AI SDK が幅広い対応モデルを提供しており、このアダプター経由で Agents SDKに取り込めます。

## セットアップ

<Steps>

1. extensions パッケージをインストールして AI SDK アダプターを導入します:

   ```bash
   npm install @openai/agents-extensions
   ```

2. Vercel の AI SDK から使用したいモデルのパッケージを選び、インストールします:

   ```bash
   npm install @ai-sdk/openai@"^1.0.0"
   ```

3. アダプターとモデルをインポートして、エージェントに接続します:

   ```typescript
   import { openai } from '@ai-sdk/openai';
   import { aisdk } from '@openai/agents-extensions';
   ```

4. エージェントで使用するモデルのインスタンスを初期化します:

   ```typescript
   const model = aisdk(openai('o4-mini'));
   ```

</Steps>

<Aside type="caution">
  Vercel の AI SDK は最近 v2 に移行しましたが、 openai agent extensions はまだ
  v2 と互換性がありません。 そのため、Vercel の AI SDK の v1
  をインストールする必要があります。
</Aside>

## 例

<Code
  lang="typescript"
  code={aiSdkSetupExample}
  title="AI SDK のセットアップ"
/>

## プロバイダーのメタデータの受け渡し

メッセージと一緒にプロバイダー固有のオプションを送る必要がある場合は、`providerMetadata` を介して渡してください。値は基盤の AI SDK モデルに直接転送されます。たとえば、Agents SDKで次の `providerData` は

```ts
providerData: {
  anthropic: {
    cacheControl: {
      type: 'ephemeral';
    }
  }
}
```

AI SDK 連携を使用する場合は

```ts
providerMetadata: {
  anthropic: {
    cacheControl: {
      type: 'ephemeral';
    }
  }
}
```

になります。
