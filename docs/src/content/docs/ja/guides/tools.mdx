---
title: ツール
description: Provide your agents with capabilities via hosted tools or custom function tools
---

import { Code } from '@astrojs/starlight/components';
import toolsFunctionExample from '../../../../../../examples/docs/tools/functionTools.ts?raw';
import toolsHostedToolsExample from '../../../../../../examples/docs/tools/hostedTools.ts?raw';
import nonStrictSchemaTools from '../../../../../../examples/docs/tools/nonStrictSchemaTools.ts?raw';
import agentsAsToolsExample from '../../../../../../examples/docs/tools/agentsAsTools.ts?raw';
import mcpLocalServer from '../../../../../../examples/docs/tools/mcpLocalServer.ts?raw';

ツールを使うと、エージェントは ** アクションを実行 ** できます — データの取得、外部 API の呼び出し、コードの実行、さらにはコンピュータの使用まで可能です。JavaScript/TypeScript SDK は 4 つの カテゴリー をサポートします:

1. **組み込みツール（Hosted）** – OpenAI の サーバー上でモデルと並行して実行されます。（Web 検索、ファイル検索、コンピュータ操作、code interpreter、画像生成）
2. **関数ツール** – 任意のローカル関数を JSON スキーマでラップして、LLM が呼び出せるようにします。
3. **ツールとしてのエージェント** – エージェント全体を呼び出し可能なツールとして公開します。
4. **ローカル MCP サーバー** – あなたのマシン上で動作する Model Context Protocol サーバーを接続します。

---

## 1. 組み込みツール（Hosted）

`OpenAIResponsesModel` を使う場合、次の組み込みツールを追加できます:

| ツール                  | タイプ文字列         | 目的                                                |
| ----------------------- | -------------------- | --------------------------------------------------- |
| Web search              | `'web_search'`       | インターネット検索                                  |
| File / retrieval search | `'file_search'`      | OpenAI 上でホストされている ベクトルストア をクエリ |
| Computer use            | `'computer'`         | GUI 操作を自動化                                    |
| Code Interpreter        | `'code_interpreter'` | サンドボックス環境でコードを実行                    |
| Image generation        | `'image_generation'` | テキストに基づいて画像を生成                        |

<Code
  lang="typescript"
  code={toolsHostedToolsExample}
  title="組み込みツール（Hosted）"
/>

正確なパラメーターセットは OpenAI Responses API に一致します。`rankingOptions` やセマンティックフィルターなどの高度なオプションは、公式ドキュメントを参照してください。

---

## 2. 関数ツール

`tool()` ヘルパーで、任意の関数をツールにできます。

<Code
  lang="typescript"
  code={toolsFunctionExample}
  title="Zod パラメーターによる関数ツール"
/>

### オプションリファレンス

| フィールド      | 必須 | 説明                                                                                                                                                                                                            |
| --------------- | ---- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `name`          | No   | 関数名がデフォルトになります（例: `get_weather`）                                                                                                                                                               |
| `description`   | Yes  | LLM に提示される、明確で人が読める説明                                                                                                                                                                          |
| `parameters`    | Yes  | Zod スキーマ または 元の JSON スキーマオブジェクトのいずれか。Zod の パラメーター は自動的に **strict** モードを有効にします                                                                                    |
| `strict`        | No   | `true`（デフォルト）の場合、引数が検証に失敗すると SDK はモデルエラーを返します。あいまい一致にしたい場合は `false` を設定します                                                                                |
| `execute`       | Yes  | `(args, context) => string                                                                                               \| Promise<string>`– あなたのビジネスロジック。省略可能な第 2 引数は `RunContext` です |
| `errorFunction` | No   | 内部エラーをユーザーに見える文字列へ変換するためのカスタムハンドラー `(context, error) => string`                                                                                                               |

### 非厳密な JSON スキーマのツール

不正または不完全な入力をモデルに推測させたい場合は、元の JSON スキーマを使うときに strict モードを無効化できます:

<Code
  lang="typescript"
  code={nonStrictSchemaTools}
  title="非厳密な JSON スキーマのツール"
/>

---

## 3. ツールとしてのエージェント

会話を完全に ハンドオフ せずに、別のエージェントを支援役として使いたいことがあります。その場合は `agent.asTool()` を使います:

<Code
  lang="typescript"
  code={agentsAsToolsExample}
  title="ツールとしてのエージェント"
/>

内部的には、この SDK は次を行います:

- 単一の `input` パラメーターを持つ関数ツールを作成
- ツールが呼ばれたときに、その入力でサブエージェントを実行
- 最後のメッセージ、または `customOutputExtractor` により抽出された出力を返却

---

## 4. ローカル MCP サーバー

ローカルの [Model Context Protocol](https://modelcontextprotocol.io/) サーバー経由でツールを公開し、エージェントに接続できます。`MCPServerStdio` を使って サーバー を起動・接続します:

<Code lang="typescript" code={mcpLocalServer} title="ローカル MCP サーバー" />

完全なサンプルは [`filesystem-example.ts`](https://github.com/openai/openai-agents-js/tree/main/examples/mcp/filesystem-example.ts) を参照してください。

---

## ツール使用の動作

モデルがいつ・どのようにツールを必ず使うべきかの制御については、[エージェント](/openai-agents-js/ja/guides/agents#forcing-tool-use) を参照してください（`tool_choice`、`toolUseBehavior` など）。

---

## ベストプラクティス

- **短く明確な説明** – ツールが _何を_ するか、 _いつ使うべきか_ を記述する
- **入力の検証** – 可能な場合は Zod スキーマで厳密な JSON 検証を行う
- **エラーハンドラーで副作用を避ける** – `errorFunction` は例外を投げず、有用な文字列を返すべき
- **ツールごとに単一責任** – 小さく合成しやすいツールは、より良いモデル推論につながる

---

## 次のステップ

- [ツール使用の強制](/openai-agents-js/ja/guides/agents#forcing-tool-use) について学ぶ
- ツールの入力や出力を検証するために [ガードレール](/openai-agents-js/ja/guides/guardrails) を追加する
- [`tool()`](/openai-agents-js/openai/agents/functions/tool) の TypeDoc リファレンス と、各種 組み込みツール（Hosted） タイプを参照する
