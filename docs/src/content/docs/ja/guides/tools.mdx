---
title: ツール
description: Provide your agents with capabilities via hosted tools or custom function tools
---

import { Code } from '@astrojs/starlight/components';
import toolsFunctionExample from '../../../../../../examples/docs/tools/functionTools.ts?raw';
import toolsHostedToolsExample from '../../../../../../examples/docs/tools/hostedTools.ts?raw';
import nonStrictSchemaTools from '../../../../../../examples/docs/tools/nonStrictSchemaTools.ts?raw';
import agentsAsToolsExample from '../../../../../../examples/docs/tools/agentsAsTools.ts?raw';
import mcpLocalServer from '../../../../../../examples/docs/tools/mcpLocalServer.ts?raw';

ツールにより、エージェント は ** 行動を実行 ** できます – データを取得し、外部 API を呼び出し、コードを実行し、コンピュータを使うこともできます。JavaScript / TypeScript SDK は 4 つの カテゴリー をサポートします:

1. 組み込みツール（Hosted） – モデルと同じ OpenAI サーバー 上で実行 _(Web 検索, ファイル検索, コンピュータ操作, code interpreter, 画像生成)_
2. 関数ツール – 任意のローカル関数を JSON スキーマでラップし、LLM が呼び出せるようにする
3. エージェント をツールとして使用 – エージェント 全体を呼び出し可能なツールとして公開
4. ローカル MCP サーバー – 自分のマシンで動作する Model Context Protocol サーバー を接続

---

## 1. 組み込みツール（Hosted）

`OpenAIResponsesModel` を使う場合、次の組み込みツールを追加できます:

| ツール                  | 型文字列             | 目的                                            |
| ----------------------- | -------------------- | ----------------------------------------------- |
| Web search              | `'web_search'`       | インターネット検索                              |
| File / retrieval search | `'file_search'`      | OpenAI でホストされている ベクトルストア を照会 |
| Computer use            | `'computer'`         | GUI 操作を自動化                                |
| Code Interpreter        | `'code_interpreter'` | サンドボックス環境でコードを実行                |
| Image generation        | `'image_generation'` | テキストに基づいて画像を生成                    |

<Code
  lang="typescript"
  code={toolsHostedToolsExample}
  title="組み込みツール（Hosted）"
/>

正確なパラメーターセットは OpenAI Responses API と一致します。`rankingOptions` やセマンティックフィルターなどの高度なオプションについては公式ドキュメントを参照してください。

---

## 2. 関数ツール

`tool()` ヘルパーを使えば、**任意の** 関数をツールにできます。

<Code
  lang="typescript"
  code={toolsFunctionExample}
  title="Zod パラメーターの関数ツール"
/>

### オプションのリファレンス

| フィールド      | 必須   | 説明                                                                                                                     |
| --------------- | ------ | ------------------------------------------------------------------------------------------------------------------------ |
| `name`          | いいえ | 関数名がデフォルトです（例: `get_weather`）                                                                              |
| `description`   | はい   | LLM に提示される、明確で人が読みやすい説明                                                                               |
| `parameters`    | はい   | Zod スキーマまたは 元 の JSON スキーマ オブジェクトのいずれか。Zod パラメーターは自動的に ** strict ** モードを有効化    |
| `strict`        | いいえ | `true`（デフォルト）の場合、引数が検証に通らないと SDK はモデルエラーを返します。曖昧マッチにしたい場合は `false` を設定 |
| `execute`       | はい   | `(args, context) => string \| Promise<string>`– ビジネスロジック。第 2 引数は任意で、`RunContext` です                   |
| `errorFunction` | いいえ | 内部エラーを ユーザー に表示する文字列へ変換するためのカスタムハンドラー `(context, error) => string`                    |

### strict 無効の JSON スキーマ ツール

無効または不完全な入力をモデルに推測させたい場合は、元 の JSON スキーマを使うときに strict モードを無効化できます:

<Code
  lang="typescript"
  code={nonStrictSchemaTools}
  title="strict 無効の JSON スキーマ ツール"
/>

---

## 3. エージェントをツールとして使用

会話全体を ハンドオフ せずに、ある エージェント が別の エージェント を支援したい場合があります。`agent.asTool()` を使用します:

<Code
  lang="typescript"
  code={agentsAsToolsExample}
  title="エージェントをツールとして使用"
/>

内部では SDK が次を行います:

- 単一の `input` パラメーター を持つ 関数ツール を作成
- ツールが呼び出されたとき、その入力でサブ エージェント を実行
- 最後のメッセージ、または `customOutputExtractor` により抽出された出力を返す

---

## 4. ローカル MCP サーバー

ローカルの [Model Context Protocol](https://modelcontextprotocol.io/) サーバー 経由でツールを公開し、エージェント に接続できます。
`MCPServerStdio` を使って サーバー を起動・接続します:

<Code lang="typescript" code={mcpLocalServer} title="ローカル MCP サーバー" />

完全な sample code は [`filesystem-example.ts`](https://github.com/openai/openai-agents-js/tree/main/examples/mcp/filesystem-example.ts) を参照してください。

---

## ツール使用時の動作

モデルがいつどのようにツールを必ず使うかを制御するには、[エージェント](/openai-agents-js/ja/guides/agents#forcing-tool-use) を参照してください（`tool_choice`、`toolUseBehavior` など）。

---

## ベストプラクティス

- ** 短く明示的な説明 ** – ツールが _ 何をするか _ と _ いつ使うか _ を記述
- ** 入力の検証 ** – 可能な限り、strict な JSON 検証に Zod スキーマを使用
- ** エラーハンドラーで副作用を避ける ** – `errorFunction` は例外を投げず、有用な文字列を返す
- ** ツールは単一責務に ** – 小さく合成可能なツールは、より良いモデル推論につながる

---

## 次のステップ

- [ツール使用の強制](/openai-agents-js/ja/guides/agents#forcing-tool-use) について学ぶ
- ツールの入力や出力を検証するために [ガードレール](/openai-agents-js/ja/guides/guardrails) を追加
- [`tool()`](/openai-agents-js/openai/agents/functions/tool) の TypeDoc リファレンス と各種 組み込みツール（Hosted）タイプを参照してください
