---
title: モデル
description: Choose and configure language models for your agents
---

import { Code } from '@astrojs/starlight/components';
import modelCustomProviderExample from '../../../../../../examples/docs/models/customProviders.ts?raw';
import setDefaultOpenAIKeyExample from '../../../../../../examples/docs/config/setDefaultOpenAIKey.ts?raw';
import modelSettingsExample from '../../../../../../examples/docs/models/modelSettings.ts?raw';
import promptIdExample from '../../../../../../examples/basic/prompt-id.ts?raw';
import agentWithModelExample from '../../../../../../examples/docs/models/agentWithModel.ts?raw';
import runnerWithModelExample from '../../../../../../examples/docs/models/runnerWithModel.ts?raw';
import setTracingExportApiKeyExample from '../../../../../../examples/docs/config/setTracingExportApiKey.ts?raw';

すべての エージェント は最終的に LLM を呼び出します。この SDK は、モデルを 2 つの軽量なインターフェースの背後に抽象化します:

- [`Model`](/openai-agents-js/openai/agents/interfaces/model) – 特定の API に対して _ 1 回 _ のリクエストを行う方法を知っています
- [`ModelProvider`](/openai-agents-js/openai/agents/interfaces/modelprovider) – 人間が読めるモデルの ** 名前 **（例: `'gpt‑4o'`）を `Model` インスタンスに解決します

日々の作業では通常、モデルの ** 名前 ** と、時々 `ModelSettings` だけを扱います。

<Code
  lang="typescript"
  code={agentWithModelExample}
  title="エージェントごとのモデル指定"
/>

---

## OpenAI プロバイダー

既定の `ModelProvider` は OpenAI APIs を使って名前を解決します。2 つの別個のエンドポイントをサポートします:

| API              | 用途                                                                     | 呼び出し `setOpenAIAPI()`                  |
| ---------------- | ------------------------------------------------------------------------ | ------------------------------------------ |
| Chat Completions | 標準的なチャットと関数呼び出し                                           | `setOpenAIAPI('chat_completions')`         |
| Responses        | 新しい ストリーミング ファーストの生成 API（ツール呼び出し、柔軟な出力） | `setOpenAIAPI('responses')` _(デフォルト)_ |

### 認証

<Code
  lang="typescript"
  code={setDefaultOpenAIKeyExample}
  title="既定の OpenAI キーを設定"
/>

カスタムのネットワーク設定が必要な場合は、`setDefaultOpenAIClient(client)` を使って独自の OpenAI クライアントを差し込むこともできます。

### デフォルトモデル

OpenAI プロバイダーのデフォルトは `gpt‑4o` です。エージェント単位またはグローバルに上書きできます:

<Code
  lang="typescript"
  code={runnerWithModelExample}
  title="デフォルトモデルを設定"
/>

---

## ModelSettings

`ModelSettings` は OpenAI のパラメーターを反映しますが、プロバイダーに依存しません。

| フィールド          | 型                                         | 備考                                                                                    |
| ------------------- | ------------------------------------------ | --------------------------------------------------------------------------------------- |
| `temperature`       | `number`                                   | 創造性と決定性のバランス                                                                |
| `topP`              | `number`                                   | Nucleus サンプリング                                                                    |
| `frequencyPenalty`  | `number`                                   | 繰り返し出現するトークンを抑制                                                          |
| `presencePenalty`   | `number`                                   | 新しいトークンの出現を促進                                                              |
| `toolChoice`        | `'auto' \| 'required' \| 'none' \| string` | 詳しくは [ツール使用の強制](/openai-agents-js/ja/guides/agents#forcing-tool-use) を参照 |
| `parallelToolCalls` | `boolean`                                  | サポートされている場合は関数呼び出しの並列実行を許可                                    |
| `truncation`        | `'auto' \| 'disabled'`                     | トークンの切り捨て戦略                                                                  |
| `maxTokens`         | `number`                                   | 応答の最大トークン数                                                                    |
| `store`             | `boolean`                                  | 取得 / RAG ワークフローのために応答を永続化                                             |

設定はどちらのレベルにも付与できます:

<Code lang="typescript" code={modelSettingsExample} title="モデル設定" />

`Runner` レベルの設定は、競合するエージェント単位の設定より優先されます。

---

## プロンプト

エージェント は `prompt` パラメーターで構成でき、エージェント の挙動を制御するために使用するサーバーに保存されたプロンプト構成を指します。現在、このオプションがサポートされるのは OpenAI の
[Responses API](https://platform.openai.com/docs/api-reference/responses) を使用する場合のみです。

| フィールド  | 型       | 備考                                                                                                                  |
| ----------- | -------- | --------------------------------------------------------------------------------------------------------------------- |
| `promptId`  | `string` | プロンプトの一意識別子                                                                                                |
| `version`   | `string` | 使用したいプロンプトのバージョン                                                                                      |
| `variables` | `object` | プロンプトに差し込む変数のキー/値ペア。値は文字列、またはテキスト・画像・ファイルなどのコンテンツ入力タイプが指定可能 |

<Code
  lang="typescript"
  code={promptIdExample}
  title="プロンプト付きのエージェント"
/>

tools や instructions のような追加の エージェント 構成は、保存済みプロンプトで設定した値を上書きします。

---

## カスタムモデルプロバイダー

独自のプロバイダーの実装は簡単です。`ModelProvider` と `Model` を実装し、そのプロバイダーを `Runner` のコンストラクターに渡します:

<Code
  lang="typescript"
  code={modelCustomProviderExample}
  title="最小のカスタムプロバイダー"
/>

---

## トレーシングエクスポーター

OpenAI プロバイダーを使用する場合、API キーを指定して自動トレース送信を有効化できます:

<Code
  lang="typescript"
  code={setTracingExportApiKeyExample}
  title="トレーシングエクスポーター"
/>

これによりトレースが [OpenAI ダッシュボード](https://platform.openai.com/traces) に送信され、ワークフローの完全な実行グラフを確認できます。

---

## 次のステップ

- [エージェントの実行](/openai-agents-js/ja/guides/running-agents) を確認する
- モデルに [ツール](/openai-agents-js/ja/guides/tools) を使って強力な機能を付与する
- 必要に応じて [ガードレール](/openai-agents-js/ja/guides/guardrails) または [トレーシング](/openai-agents-js/ja/guides/tracing) を追加する
